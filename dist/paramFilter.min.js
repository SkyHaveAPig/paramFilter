!function(e){"function"!=typeof define||!define.amd&&!define.cmd||jQuery?"object"==typeof module&&module.exports?module.exports=function(t,a){return void 0===a&&(a="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(a),a}:e(jQuery):define(["jquery"],e)}(function(e){function t(t,r,i,n,s){this.init=function(){var e=this;this.result={err_msg:"",data:{}},this.quene=a,this.addRule(t,e),this.callback=i||function(){},this.ajaxItem=r,this.params=s||"",this.filter(e),this.params&&this.load(e)},this.addRule=function(e,t){"object"==typeof e&&e.forEach(function(e){e.paramName&&"function"==typeof e.processor&&t.quene.forEach(function(a,r){a.paramName==e.paramName?t.quene[r]=e:t.quene.push(a)})})},this.load=function(t){"object"==typeof t.params&&(t.quene.forEach(function(a,r){t.params.forEach(function(i){i.paramName==a.paramName&&n.find("*").each(function(n,s){var u=e(s).parent().attr("filter-type");e(s).find("*").each(function(){i.filterType==u&&i.value==e(this).attr(i.paramName)&&(t.result.data[u]={},t.result.data[u].value=t.quene[r].processor(e(this).attr(a.paramName)),t.result.data[u].ele=this,t.result.data[u].value?t.result.err_msg=0:(t.result.err_msg=1,t.result.data[u]="处理器返回值错误"))})})})}),t.ajaxItem?t.ajax(t):t.callback(t.result))},this.filter=function(t){n.each(function(a,r){var i=e(r).attr("filter-type");i&&t.quene.forEach(function(a,n){e(r).find("*["+a.paramName+"]").click(function(r){t.result.data[i]={},t.result.data[i].value=t.quene[n].processor(e(this).attr(a.paramName)),t.result.data[i].ele=this,t.result.data[i]?t.result.err_msg=0:(t.result.err_msg=1,t.result.data[i]="处理器返回值错误"),t.ajaxItem?t.ajax(t):t.callback(t.result)})})})},this.ajax=function(t){t.ajaxItem.data={};for(x in t.result.data)t.ajaxItem.data[x]=t.result.data[x].value;t.ajaxItem.success=function(e){var a="";for(x in t.result.data)a=e.data[x],e.data[x]={},e.data[x].value=a,e.data[x].ele=t.result.data[x].ele;t.callback(e.data)},t.ajaxItem.error=function(e){console.log("ajax请求错误："+e.err_msg)},e.ajax(t.ajaxItem)},this.init()}(new Date).__proto__.format=function(e){var t=e,a=["日","一","二","三","四","五","六"];return t=t.replace(/yyyy|YYYY/,this.getFullYear()),t=t.replace(/yy|YY/,this.getYear()%100>9?(this.getYear()%100).toString():"0"+this.getYear()%100),t=t.replace(/MM/,this.getMonth()+1>9?this.getMonth().toString():"0"+(this.getMonth()+1)),t=t.replace(/M/g,this.getMonth()+1),t=t.replace(/w|W/g,a[this.getDay()]),t=t.replace(/dd|DD/,this.getDate()>9?this.getDate().toString():"0"+this.getDate()),t=t.replace(/d|D/g,this.getDate()),t=t.replace(/hh|HH/,this.getHours()>9?this.getHours().toString():"0"+this.getHours()),t=t.replace(/h|H/g,this.getHours()),t=t.replace(/mm/,this.getMinutes()>9?this.getMinutes().toString():"0"+this.getMinutes()),t=t.replace(/m/g,this.getMinutes()),t=t.replace(/ss|SS/,this.getSeconds()>9?this.getSeconds().toString():"0"+this.getSeconds()),t=t.replace(/s|S/g,this.getSeconds())};var a=[{paramName:"param-value",processor:function(e){return e}},{paramName:"param-date",processor:function(e){switch(e){case"近7天":return{startTime:new Date((new Date).getTime()-6048e5).format("yyyy-MM-dd"),endTime:(new Date).format("yyyy-MM-dd")};case"近30天":return{startTime:new Date((new Date).getTime()-2592e6).format("yyyy-MM-dd"),endTime:(new Date).format("yyyy-MM-dd")};case"近90天":return{startTime:new Date((new Date).getTime()-7776e6).format("yyyy-MM-dd"),endTime:(new Date).format("yyyy-MM-dd")}}}}];e.fn.paramFilter=function(e,a,r,i){new t(e,a,r,this,i);return this}});